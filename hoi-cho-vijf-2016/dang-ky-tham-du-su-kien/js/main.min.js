
$(document).ready(function(){$(".textcongrat").html('<div class="text_chuc_mung">Thời gian đăng ký nhận quà tặng và voucher 500.000 đồng mua nhẫn cưới đã kết thúc<br />Quý khách truy cập <a href="http://trangsuc.doji.vn/microsite/hoi-cho-vijf-2016/">tại đây</a> để biết các chương trình khuyến mại đang diễn ra.</div>');var a=$("#dangKyVoucher");var b=a.find("input, select, button, textarea,#gioitinh1 img");b.prop("disabled",true);return false});$("#name").on("input",function(){var a=$(this);var b=a.val();if(b&&b!==""){a.removeClass("invalid").addClass("valid")}else{a.removeClass("valid").addClass("invalid")}});$("#birthday").on("input",function(){var a=$(this);var b=/^([0-9]*)$/;var c=b.test(a.val());if(c&&(a.val()!=="")){a.removeClass("invalid").addClass("valid")}else{a.removeClass("valid").addClass("invalid")}});$("#gioitinh1 input").each(function(){var a=$(this);a.removeClass("valid").addClass("invalid");$("#gioitinh1 img").on("click",function(){$("#gioitinh1 img").each(function(){$(this).attr("src","images/radio-img-1.png");$(this).prev().attr("checked",false)});$(this).attr("src","images/radio-img-2.png");$(this).prev().attr("checked",true);$("#gioitinh1 input").removeClass("invalid").addClass("valid")})});$("#choose1 input").each(function(){var a=$(this);a.removeClass("valid").addClass("invalid");$("#choose1 img").on("click",function(){$("#choose1 img").each(function(){$(this).attr("src","images/radio-img-1.png");$(this).prev().attr("checked",false)});$(this).attr("src","images/radio-img-2.png");$(this).prev().attr("checked",true);$("#choose1 input").removeClass("invalid").addClass("valid")})});$("#addr").on("input",function(){var a=$(this);var b=a.val();if(b&&b!==""){a.removeClass("invalid").addClass("valid")}else{a.removeClass("valid").addClass("invalid")}});$("#quanhuyen").on("input",function(){var a=$(this);var b=a.val();if(b&&b!==""){a.removeClass("invalid").addClass("valid")}else{a.removeClass("valid").addClass("invalid")}});$("#city").on("input",function(){var a=$(this);var b=a.val();if(b&&b!==""){a.removeClass("invalid").addClass("valid")}else{a.removeClass("valid").addClass("invalid")}});$("#phone").on("input",function(){var a=$(this);var b=/^([0-9]*)$/;var c=b.test(a.val());if(c&&(a.val()!=="")){a.removeClass("invalid").addClass("valid");$("#er_phone_da_dung").removeClass("phone_da_dung_show").addClass("phone_da_dung")}else{a.removeClass("valid").addClass("invalid")}});$("#diadiemkhac").on("input",function(){var b=$(this);var a=b.val();if(a){b.removeClass("invalid").addClass("valid");$("#diadiem").removeClass("invalid").addClass("valid")}else{b.removeClass("valid").addClass("invalid");$("#diadiem").removeClass("valid").addClass("invalid")}});var diadiem4_input=$(".formRowDiadiem4 input");diadiem4_input.each(function(a){$(this).change(function(){var c="";var b=$(this);if(this.checked){b.removeClass("invalid").addClass("valid");c=$("#diadiem").val()+","+b.val();$("#diadiem").val(c)}else{$("#diadiemkhac").removeClass("valid").addClass("invalid");b.removeClass("valid").addClass("invalid");var d=$("#diadiem").val();c=d.replace(","+b.val(),"");$("#diadiem").val(c)}if(diadiem4_input.hasClass("valid")){$("#diadiemkhac").removeClass("invalid").addClass("valid");$("#diadiem").removeClass("invalid").addClass("valid")}else{if($("#diadiemkhac").val()===""){$("#diadiemkhac").removeClass("valid").addClass("invalid");$("#diadiem").removeClass("valid").addClass("invalid")}else{$("#diadiemkhac").removeClass("invalid").addClass("valid");$("#diadiem").removeClass("invalid").addClass("valid")}}})});$("#email").on("input",function(){var a=$(this);var b=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;var c=b.test(a.val());if(c&&(a.val()!="")){a.removeClass("invalid").addClass("valid")}else{a.removeClass("valid").addClass("invalid");$("#er_email_da_dung").removeClass("em_da_dung_show").addClass("em_da_dung")}});$("#dangKyVoucher").submit(function(b){$("#er_phone_da_dung").removeClass("phone_da_dung_show").addClass("phone_da_dung");var e=$("#dangKyVoucher").serializeArray();e.push({name:"gioitinh"});e.push({name:"choose"});var i=true;for(var h in e){var d=$("#"+e[h]["name"]);console.log(d);var a=d.hasClass("valid");var j=$("#er_"+e[h]["name"]);if(!a){j.removeClass("error").addClass("error_show");i=false}else{j.removeClass("error_show").addClass("error")}}b.preventDefault();if(!i){var g=$("#nhanvoucher").offset();var f=g.top;var k=$("#h-main").height();var c=(f-k);$("html, body").animate({scrollTop:c},1000);b.preventDefault()}else{console.log($("#dangKyVoucher").serialize());$("body").css({cursor:"progress"});$.ajax({url:"https://script.google.com/macros/s/AKfycbzBftyN2geJAZt4yOOhqpkMns2odww_tXpcI8orkkiu5r3pvZgW/exec",type:"GET",data:$("#dangKyVoucher").serialize(),dataType:"jsonp",success:function(n,u,l){console.log(n);if("error_email"===n.ercode&&$("#email").val()!==""){$("#er_email_da_dung").removeClass("em_da_dung").addClass("em_da_dung_show");$("#er_phone_da_dung").removeClass("phone_da_dung_show").addClass("phone_da_dung");$("#er_email").removeClass("error_show").addClass("error");var s=$("#nhanvoucher").offset();var q=s.top;var v=$("#h-main").height();var p=(q-v);$("html, body").animate({scrollTop:p},1000);$("body").css({cursor:"default"});return false}else{if("error_sdt"===n.ercode&&$("#phone").val()!==""){$("#er_phone_da_dung").removeClass("phone_da_dung").addClass("phone_da_dung_show");$("#er_email_da_dung").removeClass("em_da_dung_show").addClass("em_da_dung");$("#er_phone").removeClass("error_show").addClass("error");var s=$("#nhanvoucher").offset();var q=s.top;var v=$("#h-main").height();var p=(q-v);$("html, body").animate({scrollTop:p},1000);$("body").css({cursor:"default"});return false}else{if(n.status==="OK"){$("#er_email_da_dung").removeClass("em_da_dung_show").addClass("em_da_dung");$("#er_phone_da_dung").removeClass("phone_da_dung_show").addClass("phone_da_dung");$(".textcongrat").html('<div class="text_chuc_mung">Chúc mừng bạn đã đăng ký thành công!<br />Bấm vào <a href="http://trangsuc.doji.vn/microsite/hoi-cho-vijf-2016/">đây</a> để về trang chủ!</div>');$("body").css({cursor:"default"});var w=$("#dangKyVoucher");var m=w.find("input, select, button, textarea,#gioitinh1 img");m.prop("disabled",true);return false}else{$("body").css({cursor:"default"});var s=$("#nhanvoucher").offset();var q=s.top;var v=$("#h-main").height();var p=(q-v);$("html, body").animate({scrollTop:p},1000)}}}},complete:function(){}});b.preventDefault()}});